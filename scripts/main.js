"use strict";var Model=function(){return{saveData:function(e){var t=JSON.stringify(e);console.log(t),localStorage.setItem("data",t)},getData:function(){var e=localStorage.getItem("data");if(console.log(e),null===e)return null;var t=JSON.parse(e);return console.log(t),t}}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=Model,t=e.getData();t||(t=[]),document.addEventListener("DOMContentLoaded",function(){l(),i(),r(),o(),c()},!1);var n=document.getElementById("add-task-btn"),a=document.getElementById("task-text"),d=document.getElementById("main-contents"),s=document.getElementById("delete-task-contents"),l=function(){n.addEventListener("click",function(){var n=a.value;if(n){if(null===t){var d=[n];console.log(void 0===d?"undefined":_typeof(d)),e.saveData(d)}else t.push({text:n,done:!1}),e.saveData(t);o(),a.value="";var s=document.getElementById("add-task-modal"),l=document.getElementsByClassName("modal-bg");s.classList.add("hide"),l[0].classList.add("hide")}},!1)},o=function n(){d.innerHTML="",s.innerHTML="",t.forEach(function(a){var l=t.indexOf(a);if(console.log(l),t[l].done){var o=document.createElement("ul");o.classList.add("task-cell","task-tag");var c=document.createElement("li");c.classList.add("task-check");var i=document.createElement("li");i.classList.add("task-name"),i.textContent=a.text;var r=document.createElement("li");r.classList.add("task-date"),o.appendChild(c),o.appendChild(i),o.appendChild(r);var m=document.createElement("div");m.id="todo-list",m.classList.add("task-cell-bb"),m.appendChild(o),s.appendChild(m),console.log(s)}else{var o=document.createElement("ul");o.classList.add("task-cell","task-tag");var c=document.createElement("li");c.classList.add("task-check");var i=document.createElement("li");i.classList.add("task-name"),i.textContent=a.text;var r=document.createElement("li");r.classList.add("task-date");var u=l+1,v=document.createElement("input");v.type="checkbox",v.autofocus,console.log(v),v.id="task-check-"+u,console.log(v.id),v.addEventListener("change",function(e){var t=e.target.id.substr(11),n=document.getElementById("task-finish-"+t);e.target.checked?n.classList.remove("hide"):n.classList.add("hide")}),c.appendChild(v),o.appendChild(c),o.appendChild(i),o.appendChild(r);var f=document.createElement("ul");f.classList.add("task-cell","task-tag","hide"),f.id="task-finish-"+u;var h=document.createElement("li");h.classList.add("task-done");var p=document.createElement("button");p.classList.add("cancel-btn"),p.textContent="キャンセル",p.addEventListener("click",function(){this.parentNode.parentNode.classList.add("hide"),v.checked=!1});var k=document.createElement("button");k.classList.add("done-btn"),k.textContent="タスク完了",k.addEventListener("click",function(){var a=this.closest("#todo-list");a.parentNode.removeChild(a),t[l].done=!0,e.saveData(t),n()}),h.appendChild(p),h.appendChild(k),f.appendChild(h);var m=document.createElement("div");m.id="todo-list",m.classList.add("task-cell-bb"),m.appendChild(o),m.appendChild(f),d.appendChild(m)}}),c()},c=function(){for(var e=0,n=0,a=t.length;n<a;n++)t[n].done&&e++;var d=document.getElementById("all-task-num"),s=document.getElementById("all-task-done-num");d.textContent=t.length-e,s.textContent=e},i=function(){var e=document.querySelectorAll(".js-task-visible"),t=document.querySelectorAll(".js-go-to-index"),n=document.getElementsByClassName("all-task-flame"),a=document.getElementsByClassName("delete-task-flame");e[0].addEventListener("click",function(){n[0].classList.add("show-flame")},!1),e[1].addEventListener("click",function(){a[0].classList.add("show-flame")},!1);for(var d=0,s=t.length;d<s;d++)t[d].addEventListener("click",function(){this.parentNode.parentNode.classList.remove("show-flame")},!1)},r=function(){var e=document.getElementById("add-btn"),t=document.getElementById("add-task-modal"),n=document.getElementsByClassName("modal-bg"),a=document.getElementById("close-btn");e.addEventListener("click",function(){t.classList.remove("hide"),n[0].classList.remove("hide")},!1),n[0].addEventListener("click",function(){this.classList.contains("hide")||(t.classList.add("hide"),n[0].classList.add("hide"))},!1),a.addEventListener("click",function(){t.classList.add("hide"),n[0].classList.add("hide")},!1)}}();