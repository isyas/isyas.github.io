"use strict";var Model=function(){return{saveData:function(e){var t=JSON.stringify(e);console.log(t),localStorage.setItem("data",t)},getData:function(){var e=localStorage.getItem("data");if(console.log(e),null===e)return null;var t=JSON.parse(e);return console.log(t),t}}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=Model,t=e.getData();t||(t=[]),document.addEventListener("DOMContentLoaded",function(){l(),i(),m(),o(),c()},!1);var a=document.getElementById("add-task-btn"),n=document.getElementById("task-text"),d=document.getElementById("main-contents"),s=document.getElementById("delete-task-contents"),l=function(){a.addEventListener("click",function(){var a=n.value;if(a){if(null===t){var d=[a];console.log(void 0===d?"undefined":_typeof(d)),e.saveData(d)}else t.push({text:a,done:!1}),e.saveData(t);o(),n.value="";var s=document.getElementById("add-task-modal"),l=document.getElementsByClassName("modal-bg");s.classList.remove("show-modal"),l[0].classList.remove("show-modal-bg")}},!1)},o=function a(){d.innerHTML="",s.innerHTML="",t.forEach(function(n){var l=t.indexOf(n);if(console.log(l),t[l].done){var o=document.createElement("ul");o.classList.add("task-cell","task-tag");var c=document.createElement("li");c.classList.add("task-check");var i=document.createElement("li");i.classList.add("task-name"),i.textContent=n.text;var m=document.createElement("li");m.classList.add("task-date"),o.appendChild(c),o.appendChild(i),o.appendChild(m);var r=document.createElement("div");r.id="todo-list",r.classList.add("task-cell-bb"),r.appendChild(o),s.appendChild(r),console.log(s)}else{var o=document.createElement("ul");o.classList.add("task-cell","task-tag");var c=document.createElement("li");c.classList.add("task-check");var i=document.createElement("li");i.classList.add("task-name"),i.textContent=n.text;var m=document.createElement("li");m.classList.add("task-date");var u=l+1,v=document.createElement("input");v.type="checkbox",v.autofocus,console.log(v),v.id="task-check-"+u,console.log(v.id),v.addEventListener("change",function(e){var t=e.target.id.substr(11),a=document.getElementById("task-finish-"+t);e.target.checked?a.classList.remove("hide"):a.classList.add("hide")}),c.appendChild(v),o.appendChild(c),o.appendChild(i),o.appendChild(m);var h=document.createElement("ul");h.classList.add("task-cell","task-tag","hide"),h.id="task-finish-"+u;var f=document.createElement("li");f.classList.add("task-done");var p=document.createElement("button");p.classList.add("cancel-btn"),p.textContent="キャンセル",p.addEventListener("click",function(){this.parentNode.parentNode.classList.add("hide"),v.checked=!1});var g=document.createElement("button");g.classList.add("done-btn"),g.textContent="タスク完了",g.addEventListener("click",function(){var n=this.closest("#todo-list");n.parentNode.removeChild(n),t[l].done=!0,e.saveData(t),a()}),f.appendChild(p),f.appendChild(g),h.appendChild(f);var r=document.createElement("div");r.id="todo-list",r.classList.add("task-cell-bb"),r.appendChild(o),r.appendChild(h),d.appendChild(r)}}),c()},c=function(){for(var e=0,a=0,n=t.length;a<n;a++)t[a].done&&e++;var d=document.getElementById("all-task-num"),s=document.getElementById("all-task-done-num");d.textContent=t.length-e,s.textContent=e},i=function(){var e=document.querySelectorAll(".js-task-visible"),t=document.querySelectorAll(".js-go-to-index"),a=document.getElementsByClassName("all-task-flame"),n=document.getElementsByClassName("delete-task-flame");e[0].addEventListener("click",function(){a[0].classList.remove("hide"),a[0].classList.add("show-flame")},!1),e[1].addEventListener("click",function(){n[0].classList.remove("hide"),n[0].classList.add("show-flame")},!1);for(var d=0,s=t.length;d<s;d++)t[d].addEventListener("click",function(){this.parentNode.parentNode.classList.remove("show-flame")},!1)},m=function(){var e=document.getElementById("add-btn"),t=document.getElementById("add-task-modal"),a=document.getElementsByClassName("modal-bg"),n=document.getElementById("close-btn");e.addEventListener("click",function(){t.classList.add("show-modal"),a[0].classList.add("show-modal-bg")},!1),a[0].addEventListener("click",function(){this.classList.contains("show-modal-bg")&&(t.classList.remove("show-modal"),a[0].classList.remove("show-modal-bg"))},!1),n.addEventListener("click",function(){t.classList.remove("show-modal"),a[0].classList.remove("show-modal-bg")},!1)}}();