"use strict";var Model=function(){return{saveData:function(e){var t=JSON.stringify(e);console.log(t),localStorage.setItem("data",t)},getData:function(){var e=localStorage.getItem("data");if(console.log(e),null===e)return null;var t=JSON.parse(e);return console.log(t),t}}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=Model,t=e.getData();t||(t=[]),document.addEventListener("DOMContentLoaded",function(){l(),i(),m(),o(),c()},!1);var a=document.getElementById("add-task-btn"),s=document.getElementById("task-text"),n=document.getElementById("main-contents"),d=document.getElementById("delete-task-contents"),l=function(){a.addEventListener("click",function(){var a=s.value;if(a){if(null===t){var n=[a];console.log(void 0===n?"undefined":_typeof(n)),e.saveData(n)}else t.push({text:a,done:!1}),e.saveData(t);o(),s.value="";var d=document.getElementById("add-task-modal"),l=document.getElementsByClassName("modal-bg");d.classList.remove("show-modal"),l[0].classList.remove("show-modal-bg")}},!1)},o=function a(){n.innerHTML="",d.innerHTML="",t.forEach(function(s){var l=t.indexOf(s);if(console.log(l),t[l].done){var o=document.createElement("ul");o.classList.add("task-cell","task-tag");var c=document.createElement("li");c.classList.add("task-check");var i=document.createElement("li");i.classList.add("task-name"),i.textContent=s.text;var m=document.createElement("li");m.classList.add("task-date"),o.appendChild(c),o.appendChild(i),o.appendChild(m);var r=document.createElement("div");r.id="todo-list",r.classList.add("task-cell-bb"),r.appendChild(o),d.appendChild(r),console.log(d)}else{var o=document.createElement("ul");o.classList.add("task-cell","task-tag","task-cell-top");var c=document.createElement("li");c.classList.add("task-check");var i=document.createElement("li");i.classList.add("task-name"),i.textContent=s.text;var m=document.createElement("li");m.classList.add("task-date");var u=l+1,v=document.createElement("input");v.type="checkbox",console.log(v),v.id="task-check-"+u,console.log(v.id),v.addEventListener("change",function(e){var t=e.target.id.substr(11),a=document.getElementById("task-finish-"+t);e.target.checked?(a.classList.add("show-task-cell"),a.classList.contains("hide-task-cell")&&a.classList.remove("hide-task-cell")):(a.classList.remove("show-task-cell"),a.classList.add("hide-task-cell"))}),c.appendChild(v),o.appendChild(c),o.appendChild(i),o.appendChild(m);var h=document.createElement("ul");h.classList.add("task-cell","task-tag","task-cell-control"),h.id="task-finish-"+u;var L=document.createElement("li");L.classList.add("task-done");var g=document.createElement("button");g.classList.add("cancel-btn"),g.textContent="キャンセル",g.addEventListener("click",function(){this.parentNode.parentNode.classList.add("hide-task-cell"),v.checked=!1});var k=document.createElement("button");k.classList.add("done-btn"),k.textContent="タスク完了",k.addEventListener("click",function(){var s=this.closest("#todo-list");s.parentNode.removeChild(s),t[l].done=!0,e.saveData(t),a()}),L.appendChild(g),L.appendChild(k),h.appendChild(L);var r=document.createElement("div");r.id="todo-list",r.classList.add("task-cell-bb"),r.appendChild(o),r.appendChild(h),n.appendChild(r)}}),c()},c=function(){for(var e=0,a=0,s=t.length;a<s;a++)t[a].done&&e++;var n=document.getElementById("all-task-num"),d=document.getElementById("all-task-done-num");n.textContent=t.length-e,d.textContent=e},i=function(){var e=document.querySelectorAll(".js-task-visible"),t=document.querySelectorAll(".js-go-to-index"),a=document.getElementsByClassName("all-task-flame"),s=document.getElementsByClassName("delete-task-flame");e[0].addEventListener("click",function(){a[0].classList.add("show-flame")},!1),e[1].addEventListener("click",function(){s[0].classList.add("show-flame")},!1);for(var n=0,d=t.length;n<d;n++)t[n].addEventListener("click",function(){this.parentNode.parentNode.classList.remove("show-flame")},!1)},m=function(){var e=document.getElementById("add-btn"),t=document.getElementById("add-task-modal"),a=document.getElementsByClassName("modal-bg"),s=document.getElementById("close-btn");e.addEventListener("click",function(){a[0].classList.contains("hide-modal-bg")?(a[0].classList.remove("hide-modal-bg"),t.classList.add("show-modal"),a[0].classList.add("show-modal-bg")):(t.classList.add("show-modal"),a[0].classList.add("show-modal-bg"))},!1),a[0].addEventListener("click",function(){this.classList.contains("show-modal-bg")&&(t.classList.remove("show-modal"),a[0].classList.remove("show-modal-bg"),a[0].classList.add("hide-modal-bg"))},!1),s.addEventListener("click",function(){t.classList.remove("show-modal"),a[0].classList.remove("show-modal-bg"),a[0].classList.add("hide-modal-bg")},!1)}}();