"use strict";var Model=function(){return{saveData:function(e){var t=JSON.stringify(e);console.log(t),localStorage.setItem("data",t)},getData:function(){var e=localStorage.getItem("data");return null===e?null:JSON.parse(e)}}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(){var e=Model,t=e.getData();t||(t=[]),document.addEventListener("DOMContentLoaded",function(){l(),i(),m(),o(),c()},!1);var a=document.getElementById("add-task-btn"),n=document.getElementById("task-text"),s=document.getElementById("main-contents"),d=document.getElementById("delete-task-contents"),l=function(){a.addEventListener("click",function(){var a=n.value,s=new Date,d=s.getTime();if(a){if(null===t){var l=[a];console.log(void 0===l?"undefined":_typeof(l)),e.saveData(l)}else t.push({text:a,done:!1,setTime:d}),e.saveData(t);o(),n.value="";var c=document.getElementById("add-task-modal"),i=document.getElementsByClassName("modal-bg");c.classList.remove("show-modal"),i[0].classList.remove("show-modal-bg")}},!1)},o=function a(){s.innerHTML="",d.innerHTML="",t.forEach(function(n){var l=t.indexOf(n);if(t[l].done){var o=document.createElement("ul");o.classList.add("task-cell","task-tag");var c=document.createElement("li");c.classList.add("task-check");var i=document.createElement("li");i.classList.add("task-name"),i.textContent=n.text;var m=document.createElement("li");m.classList.add("task-date"),o.appendChild(c),o.appendChild(i),o.appendChild(m);var r=document.createElement("div");r.id="todo-list",r.classList.add("task-cell-bb"),r.appendChild(o),d.appendChild(r)}else{var o=document.createElement("ul");o.classList.add("task-cell","task-tag","task-cell-top");var c=document.createElement("li");c.classList.add("task-check");var i=document.createElement("li");i.classList.add("task-name"),i.textContent=n.text;var m=document.createElement("li");m.classList.add("task-date");var u=new Date,v=u.getTime();console.log(4);var h=Math.ceil((v-n.setTime)/1e3);if(console.log(h/86400),h<86400)m.textContent="今日";else{var L=Math.floor(h/86400);m.textContent=L+"日前"}var k=l+1,f=document.createElement("input");f.type="checkbox",f.id="task-check-"+k,f.addEventListener("change",function(e){var t=e.target.id.substr(11),a=document.getElementById("task-finish-"+t);e.target.checked?(a.classList.add("show-task-cell"),a.classList.contains("hide-task-cell")&&a.classList.remove("hide-task-cell")):(a.classList.remove("show-task-cell"),a.classList.add("hide-task-cell"))}),c.appendChild(f),o.appendChild(c),o.appendChild(i),o.appendChild(m);var g=document.createElement("ul");g.classList.add("task-cell","task-tag","task-cell-control"),g.id="task-finish-"+k;var p=document.createElement("li");p.classList.add("task-done");var E=document.createElement("button");E.classList.add("cancel-btn"),E.textContent="キャンセル",E.addEventListener("click",function(){this.parentNode.parentNode.classList.add("hide-task-cell"),f.checked=!1});var y=document.createElement("button");y.classList.add("done-btn"),y.textContent="タスク完了",y.addEventListener("click",function(){var n=this.closest("#todo-list");n.parentNode.removeChild(n),t[l].done=!0,e.saveData(t),a()}),p.appendChild(E),p.appendChild(y),g.appendChild(p);var r=document.createElement("div");r.id="todo-list",r.classList.add("task-cell-bb"),r.appendChild(o),r.appendChild(g),s.appendChild(r)}}),c()},c=function(){for(var e=0,a=0,n=t.length;a<n;a++)t[a].done&&e++;var s=document.getElementById("all-task-num"),d=document.getElementById("all-task-done-num");s.textContent=t.length-e,d.textContent=e},i=function(){var e=document.querySelectorAll(".js-task-visible"),t=document.querySelectorAll(".js-go-to-index"),a=document.getElementsByClassName("all-task-flame"),n=document.getElementsByClassName("delete-task-flame");e[0].addEventListener("click",function(){a[0].classList.add("show-flame")},!1),e[1].addEventListener("click",function(){n[0].classList.add("show-flame")},!1);for(var s=0,d=t.length;s<d;s++)t[s].addEventListener("click",function(){this.parentNode.parentNode.classList.remove("show-flame")},!1)},m=function(){var e=document.getElementById("add-btn"),t=document.getElementById("add-task-modal"),a=document.getElementsByClassName("modal-bg"),n=document.getElementById("close-btn");e.addEventListener("click",function(){a[0].classList.contains("hide-modal-bg")?(a[0].classList.remove("hide-modal-bg"),t.classList.add("show-modal"),a[0].classList.add("show-modal-bg")):(t.classList.add("show-modal"),a[0].classList.add("show-modal-bg"))},!1),a[0].addEventListener("click",function(){this.classList.contains("show-modal-bg")&&(t.classList.remove("show-modal"),a[0].classList.remove("show-modal-bg"),a[0].classList.add("hide-modal-bg"))},!1),n.addEventListener("click",function(){t.classList.remove("show-modal"),a[0].classList.remove("show-modal-bg"),a[0].classList.add("hide-modal-bg")},!1)}}();